{"version":3,"sources":["pages/Home.js","components/Header.js","widgets/widgets.js","components/SearchForm.js","pages/Test.js","App.js","index.js"],"names":["Home","Header","href","process","cities","SearchForm","cities_options","Object","keys","map","city","value","useState","buses","setBuses","term","setTerm","debouncedFetchBus","useCallback","func","timer","timeout","args","clearTimeout","setTimeout","apply","debounce","newTerm","newBus","i","push","id","name","end","fetchBus","method","onSubmit","e","filter","bus","length","document","querySelector","submit","preventDefault","required","list","autoComplete","onChange","target","type","Test","setCity","keyword","setKeyword","useEffect","query","URLSearchParams","window","location","search","k","get","c","console","log","App","basename","path","component","exact","ReactDOM","render"],"mappings":"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","file":"static/js/main.8d8924ca.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Home = () => {\r\n    return (\r\n        <>\r\n            Home page here.\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Home;","import React from \"react\";\r\n\r\nconst Header = () => {\r\n\r\n    return (\r\n        <header>\r\n            <h1>Logo</h1>\r\n            <nav>\r\n                <a href={`${process.env.PUBLIC_URL}/#/routes`}>routes </a>\r\n                <a href={`${process.env.PUBLIC_URL}/#/stops`}>stops </a>\r\n                <a href={`${process.env.PUBLIC_URL}/#/nearby`}>nearby </a>\r\n                <a href={`${process.env.PUBLIC_URL}/#/`}>home </a>\r\n            </nav>\r\n        </header>\r\n    );\r\n};\r\n\r\nexport default Header;","const cities = {\r\n    \"臺北市\":\"Taipei\",\r\n    \"新北市\":\"NewTaipei\",\r\n    \"桃園市\":\"Taoyuan\",\r\n    \"臺中市\":\"Taichung\",\r\n    \"臺南市\":\"Tainan\",\r\n    \"高雄市\":\"Kaohsiung\",\r\n    \"基隆市\":\"Keelung\",\r\n    \"新竹市\":\"Hsinchu\",\r\n    \"新竹縣\":\"HsinchuCounty\",\r\n    \"苗栗縣\":\"MiaoliCounty\",\r\n    \"彰化縣\":\"ChanghuaCounty\",\r\n    \"南投縣\":\"NantouCounty\",\r\n    \"雲林縣\":\"YunlinCounty\",\r\n    \"嘉義縣\":\"ChiayiCounty\",\r\n    \"嘉義市\":\"Chiayi\",\r\n    \"屏東縣\":\"PingtungCounty\",\r\n    \"宜蘭縣\":\"YilanCounty\",\r\n    \"花蓮縣\":\"HualienCounty\",\r\n    \"臺東縣\":\"TaitungCounty\",\r\n    \"金門縣\":\"KinmenCounty\",\r\n    \"澎湖縣\":\"PenghuCounty\",\r\n    \"連江縣\":\"LienchiangCounty\"\r\n};\r\n\r\nfunction debounce (func, timeout=300) {\r\n    let timer;\r\n    return (...args) => {\r\n        clearTimeout(timer);\r\n        timer = setTimeout(() => { func.apply(this, args); }, timeout);\r\n    };\r\n}\r\n\r\nexport { cities, debounce };","import React, { useState, useCallback  } from \"react\";\r\nimport { cities, debounce } from \"../widgets/widgets\";\r\n\r\nconst SearchForm = () => {\r\n    const cities_options = Object.keys(cities).map((city) => <option value={cities[city]} key={cities[city]}>{city}</option>);\r\n\r\n    const [buses, setBuses] = useState([]);\r\n    const [term, setTerm]   = useState('');\r\n    \r\n    const fetchBus = (newTerm) => {\r\n        let newBus = [];\r\n\r\n        if (newTerm !== \"\" && newTerm !== null) {\r\n            for (let i = 0 ; i < 3 ; i++) {\r\n                newBus.push({id: i, name: '225', 'start': 'aa', end: 'zz'});\r\n            }\r\n            // todo: api\r\n        }\r\n\r\n        setBuses(newBus);\r\n    }\r\n\r\n    const debouncedFetchBus = useCallback(debounce(term => fetchBus(term)), []); \r\n\r\n    const processChange = e => {\r\n        const newTerm = e.target.value;\r\n        setTerm(newTerm);\r\n        debouncedFetchBus(newTerm);\r\n    };\r\n\r\n    const checkValInList = e => {\r\n        if (buses.filter(bus => bus.name === term).length > 0) {\r\n            const form = document.querySelector('#form');\r\n            form.submit();\r\n        }\r\n        e.preventDefault();\r\n    }\r\n\r\n    return (\r\n        <form method=\"get\" onSubmit={checkValInList} id='form'>\r\n            <select name='city' required>\r\n                { cities_options }\r\n            </select>\r\n            \r\n            <input name=\"keyword\" list='list-buses' autoComplete=\"off\" required onChange={processChange} />\r\n\r\n            <datalist id=\"list-buses\">\r\n                {buses.map(function(bus) {\r\n                    return <option value={bus.name} key={bus.id} />\r\n                })}\r\n            </datalist>\r\n            \r\n            <button type=\"submit\">submit</button>\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default SearchForm;","import React, { useState, useEffect } from \"react\";\r\nimport Header from \"../components/Header\";\r\nimport SearchForm from \"../components/SearchForm\";\r\n\r\nconst Test = () => {\r\n    const [city, setCity] = useState('');\r\n    const [keyword, setKeyword] = useState('');\r\n    \r\n    useEffect(() => {\r\n        const query = new URLSearchParams(window.location.search);\r\n        const k = query.get('keyword');\r\n        const c = query.get('city');\r\n        setKeyword(k);\r\n        setCity(c);\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (city === '' || keyword === '') { return ; }\r\n\r\n        console.log(city, keyword, 'hey!');\r\n    }, [city, keyword]);\r\n\r\n    return (\r\n        <>\r\n            <Header />\r\n            <SearchForm />\r\n            hello, {keyword}!, you r in {city} city!\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Test;","import React from \"react\";\r\nimport { HashRouter, Switch, Route } from \"react-router-dom\";\r\nimport Home from \"./pages/Home\";\r\nimport Test from \"./pages/Test\";\r\n\r\nconst App = () => {\r\n    return (\r\n        <HashRouter basename={`${process.env.PUBLIC_URL}/`}>\r\n            <Switch>\r\n                <Route path=\"/routes\" component={Test} />\r\n                <Route path=\"/stops\"  component={Test} />\r\n                <Route path=\"/nearby\" component={Test} />\r\n                <Route path=\"/routes\" component={Test} />\r\n                <Route exact path=\"/\" component={Home} />\r\n            </Switch>\r\n        </HashRouter>\r\n    );\r\n};\r\n\r\nexport default App;","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n    <App />,\r\n    document.querySelector('#root')\r\n);"],"sourceRoot":""}